<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>X Veritas Collegiate Student Portal</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Open+Sans&display=swap');

  :root {
    --black: #000000;
    --white: #fefcf8;
    --oxblood: #7a1212;
    --gold: #c1a96e;
    --cream: #f8f5ec;
    --dark-gray: #444444;
    --font-display: 'Merriweather', serif;
    --font-sans: 'Open Sans', sans-serif;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    background: var(--cream);
    color: var(--dark-gray);
    font-family: var(--font-sans);
    line-height: 1.5;
  }

  header {
    background: var(--oxblood);
    color: var(--gold);
    font-family: var(--font-display);
    font-weight: 700;
    font-size: 2rem;
    padding: 1.5rem 2rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    user-select: none;
  }
  header img#crest {
    height: 56px;
    width: 56px;
    object-fit: contain;
    filter: none; /* no glow */
  }

  nav {
    display: flex;
    gap: 1rem;
    background: var(--oxblood);
    padding: 1rem 2rem;
    font-family: var(--font-display);
    font-weight: 600;
  }
  nav button {
    background: transparent;
    border: none;
    color: var(--gold);
    cursor: pointer;
    font-size: 1rem;
    padding: 0.4rem 1rem;
    border-radius: 8px;
    transition: background-color 0.3s ease;
  }
  nav button.active,
  nav button:hover,
  nav button:focus {
    background: var(--gold);
    color: var(--oxblood);
    outline: none;
  }
  nav button.logout {
    margin-left: auto;
    font-weight: 700;
  }

  main {
    max-width: 960px;
    margin: 1.5rem auto 3rem;
    padding: 0 1rem;
  }

  section.portal-section {
    display: none;
    outline: none;
  }
  section.portal-section.active {
    display: block;
  }

  /* --- Home Section --- */
  #home h1 {
    font-family: var(--font-display);
    font-weight: 700;
    color: var(--oxblood);
    margin-bottom: 0.3rem;
  }
  #home .slideshow {
    position: relative;
    height: 300px;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(122,18,18,0.25);
    margin-bottom: 1rem;
  }
  #home .slideshow img {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: opacity 1.2s ease;
  }
  #home .slideshow img.active {
    opacity: 1;
    position: relative;
  }

  #quoteBox {
    font-style: italic;
    font-family: var(--font-display);
    font-size: 1.25rem;
    color: var(--oxblood);
    border-left: 4px solid var(--gold);
    padding-left: 1rem;
    margin-bottom: 1.5rem;
    min-height: 4.5rem;
    user-select: none;
  }

  .news-deadlines {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    margin-top: 1rem;
  }
  .newsCard {
    background: var(--white);
    box-shadow: 0 6px 18px rgba(122,18,18,0.15);
    border-radius: 14px;
    padding: 1.25rem 1.5rem;
    flex: 1 1 45%;
    color: var(--dark-gray);
  }
  .newsCard h3 {
    color: var(--oxblood);
    font-family: var(--font-display);
    font-weight: 700;
    margin-bottom: 0.7rem;
  }
  .newsCard ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
  }
  .newsCard li {
    margin-bottom: 0.45rem;
    font-size: 1rem;
  }
  .emoji {
    margin-right: 0.6rem;
  }

  /* --- Assignments Section --- */
  #assignments h2 {
    font-family: var(--font-display);
    color: var(--oxblood);
    font-weight: 700;
    margin-bottom: 1rem;
  }
  #assignments .card {
    background: var(--white);
    padding: 2rem;
    border-radius: 14px;
    box-shadow: 0 10px 30px rgba(122,18,18,0.2);
  }
  #assignments form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-width: 480px;
  }
  #assignments label {
    font-weight: 700;
    color: var(--oxblood);
  }
  #assignments select, #assignments input[type="file"] {
    padding: 0.6rem 0.8rem;
    border-radius: 8px;
    border: 2px solid var(--oxblood);
    font-family: var(--font-sans);
    font-size: 1rem;
  }
  #assignments button {
    background: var(--oxblood);
    color: var(--gold);
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 12px;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    max-width: 160px;
    align-self: flex-start;
    transition: background-color 0.3s ease;
  }
  #assignments button:hover,
  #assignments button:focus {
    background: var(--gold);
    color: var(--oxblood);
    outline: none;
  }
  #submittedAssignments {
    margin-top: 1.5rem;
  }
  #submittedAssignments li {
    margin-bottom: 0.4rem;
  }

  /* --- Exams Section --- */
  #exams h2 {
    font-family: var(--font-display);
    color: var(--oxblood);
    font-weight: 700;
    margin-bottom: 1rem;
  }
  #exams select, #exams button {
    padding: 0.5rem 1rem;
    font-size: 1rem;
    border-radius: 8px;
    border: 2px solid var(--oxblood);
    font-family: var(--font-sans);
  }
  #exams button {
    background: var(--oxblood);
    color: var(--gold);
    font-weight: 700;
    margin-left: 1rem;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #exams button:hover, #exams button:focus {
    background: var(--gold);
    color: var(--oxblood);
    outline: none;
  }
  #examTable {
    width: 100%;
    margin-top: 1.5rem;
    border-collapse: collapse;
    font-family: var(--font-sans);
  }
  #examTable th, #examTable td {
    border: 1px solid var(--oxblood);
    padding: 0.6rem 1rem;
    text-align: left;
  }
  #examTable th {
    background: var(--oxblood);
    color: var(--gold);
  }
  #examDetails {
    margin-top: 1rem;
    background: var(--white);
    padding: 1rem;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(122,18,18,0.15);
    max-height: 250px;
    overflow-y: auto;
    font-family: var(--font-sans);
  }

  /* --- Inbox Section --- */
  #inbox {
    display: flex;
    gap: 1rem;
    height: 500px;
  }
  #chatSidebar {
    width: 28%;
    background: var(--white);
    border-radius: 14px;
    box-shadow: 0 8px 24px rgba(122,18,18,0.1);
    overflow-y: auto;
    padding: 1rem;
  }
  #chatSidebar h2 {
    color: var(--oxblood);
    font-family: var(--font-display);
    font-weight: 700;
    margin-top: 0;
  }
  #chatList {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  #chatList li {
    padding: 0.7rem 1rem;
    margin-bottom: 0.5rem;
    cursor: pointer;
    font-weight: 600;
    color: var(--dark-gray);
    border-radius: 10px;
    transition: background-color 0.3s ease;
  }
  #chatList li.active,
  #chatList li:hover,
  #chatList li:focus {
    background: var(--oxblood);
    color: var(--gold);
    outline: none;
  }
  #chatWindow {
    flex-grow: 1;
    background: var(--white);
    border-radius: 14px;
    box-shadow: 0 8px 24px rgba(122,18,18,0.1);
    display: flex;
    flex-direction: column;
  }
  #chatHeader {
    padding: 1rem 1.5rem;
    border-bottom: 2px solid var(--oxblood);
    font-weight: 700;
    font-family: var(--font-display);
    font-size: 1.3rem;
    color: var(--oxblood);
  }
  #messageThread {
    padding: 1rem 1.5rem;
    flex-grow: 1;
    overflow-y: auto;
    font-family: var(--font-sans);
    font-size: 0.95rem;
    background: #f7f5f1;
  }
  .message {
    max-width: 70%;
    margin-bottom: 1rem;
    padding: 0.6rem 1rem;
    border-radius: 20px;
    word-wrap: break-word;
  }
  .message.sent {
    background-color: var(--oxblood);
    color: var(--gold);
    margin-left: auto;
    border-bottom-right-radius: 0;
  }
  .message.received {
    background-color: var(--gold);
    color: var(--oxblood);
    border-bottom-left-radius: 0;
  }
  #messageForm {
    padding: 1rem 1.5rem;
    border-top: 2px solid var(--oxblood);
    display: flex;
    gap: 0.75rem;
    align-items: center;
  }
  #messageForm select, #messageForm input[type="text"], #messageForm textarea {
    font-family: var(--font-sans);
    font-size: 1rem;
    border-radius: 10px;
    border: 2px solid var(--oxblood);
    padding: 0.5rem 0.8rem;
  }
  #messageForm select, #messageForm input[type="text"] {
    width: 25%;
  }
  #messageForm textarea {
    flex-grow: 1;
    height: 60px;
    resize: none;
  }
  #messageForm button {
    background: var(--oxblood);
    color: var(--gold);
    border: none;
    border-radius: 12px;
    padding: 0.6rem 1.2rem;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #messageForm button:hover,
  #messageForm button:focus {
    background: var(--gold);
    color: var(--oxblood);
    outline: none;
  }

  /* --- Calendar Section --- */
  #calendar {
    max-width: 600px;
    margin: 0 auto;
    background: var(--white);
    border-radius: 14px;
    box-shadow: 0 10px 30px rgba(122,18,18,0.2);
    padding: 2rem;
  }
  #calendarHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: var(--font-display);
    font-weight: 700;
    color: var(--oxblood);
    margin-bottom: 1rem;
  }
  #calendarHeader button {
    background: var(--oxblood);
    color: var(--gold);
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 10px;
    font-weight: 700;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #calendarHeader button:hover,
  #calendarHeader button:focus {
    background: var(--gold);
    color: var(--oxblood);
    outline: none;
  }
  table#calendarTable {
    width: 100%;
    border-collapse: collapse;
    text-align: center;
    font-family: var(--font-sans);
  }
  #calendarTable th, #calendarTable td {
    padding: 0.6rem;
    border: 1px solid var(--oxblood);
  }
  #calendarTable th {
    background: var(--oxblood);
    color: var(--gold);
  }
  #calendarTable td {
    height: 70px;
    vertical-align: top;
    cursor: pointer;
    position: relative;
  }
  #calendarTable td:hover {
    background: #f1e8cc;
  }
  #calendarTable td .event {
    background: var(--oxblood);
    color: var(--gold);
    font-size: 0.75rem;
    border-radius: 6px;
    padding: 2px 5px;
    margin-top: 3px;
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Modal for adding events */
  #eventModal {
    display: none;
    position: fixed;
    top: 0; left: 0; right:0; bottom:0;
    background: rgba(0,0,0,0.6);
    justify-content: center;
    align-items: center;
  }
  #eventModal.active {
    display: flex;
  }
  #eventModalContent {
    background: var(--white);
    padding: 2rem;
    border-radius: 12px;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 10px 30px rgba(122,18,18,0.3);
  }
  #eventModalContent h3 {
    margin-top: 0;
    color: var(--oxblood);
    font-family: var(--font-display);
    margin-bottom: 1rem;
  }
  #eventModalContent label {
    font-weight: 700;
    color: var(--oxblood);
    display: block;
    margin-bottom: 0.3rem;
  }
  #eventModalContent input, #eventModalContent textarea, #eventModalContent select {
    width: 100%;
    padding: 0.5rem;
    font-size: 1rem;
    font-family: var(--font-sans);
    border-radius: 8px;
    border: 2px solid var(--oxblood);
    margin-bottom: 1rem;
  }
  #eventModalContent button {
    background: var(--oxblood);
    color: var(--gold);
    border: none;
    padding: 0.7rem 1.5rem;
    font-weight: 700;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #eventModalContent button:hover,
  #eventModalContent button:focus {
    background: var(--gold);
    color: var(--oxblood);
    outline: none;
  }

  /* --- Settings Section --- */
  #settings .card {
    background: var(--white);
    padding: 2rem;
    border-radius: 14px;
    max-width: 480px;
    margin: 0 auto;
    box-shadow: 0 10px 30px rgba(122,18,18,0.2);
  }
  #settings h2 {
    font-family: var(--font-display);
    color: var(--oxblood);
    font-weight: 700;
    margin-bottom: 1.5rem;
    text-align: center;
  }
  #settings label {
    font-weight: 700;
    color: var(--oxblood);
    display: block;
    margin-bottom: 0.5rem;
  }
  #settings input, #settings select {
    width: 100%;
    padding: 0.6rem 0.8rem;
    margin-bottom: 1.25rem;
    font-family: var(--font-sans);
    font-size: 1rem;
    border-radius: 8px;
    border: 2px solid var(--oxblood);
  }
  #settings input[type="file"] {
    padding: 0.2rem 0.4rem;
  }
  #settings button {
    background: var(--oxblood);
    color: var(--gold);
    border: none;
    padding: 0.75rem 1.5rem;
    font-weight: 700;
    font-size: 1.1rem;
    border-radius: 12px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    width: 100%;
  }
  #settings button:hover,
  #settings button:focus {
    background: var(--gold);
    color: var(--oxblood);
    outline: none;
  }

</style>
</head>
<body>

<header>
  <img src="crest.png" alt="X Veritas Collegiate Crest" id="crest" />
  X Veritas Collegiate
</header>

<nav aria-label="Primary navigation">
  <button id="navHome" class="active" aria-controls="home" aria-selected="true">Home</button>
  <button id="navAssignments" aria-controls="assignments" aria-selected="false">Assignments</button>
  <button id="navExams" aria-controls="exams" aria-selected="false">Exams</button>
  <button id="navInbox" aria-controls="inbox" aria-selected="false">Inbox</button>
  <button id="navCalendar" aria-controls="calendar" aria-selected="false">Calendar</button>
  <button id="navSettings" aria-controls="settings" aria-selected="false">Settings</button>
  <button id="logoutBtn" class="logout">Logout</button>
</nav>

<main>

  <!-- HOME -->
  <section id="home" class="portal-section active" tabindex="0" aria-live="polite">
    <h1>Welcome Back, Student</h1>
    <div class="slideshow" aria-label="Student life slideshow">
      <img src="student1.jpg" alt="Students collaborating in classroom" class="active" />
      <img src="student2.jpg" alt="Group study session" />
      <img src="student3.jpg" alt="Graduation ceremony" />
      <img src="student4.jpg" alt="Students working on computers" />
    </div>

    <div id="quoteBox" aria-live="polite" aria-atomic="true"></div>

    <div class="news-deadlines" aria-label="News and deadlines">
      <article class="newsCard" tabindex="0">
        <h3>📢 Latest News</h3>
        <ul>
          <li>Fall semester begins Sept 3</li>
          <li>New library resources now available</li>
          <li>Thesis submission deadline: Dec 10</li>
        </ul>
      </article>

      <article class="newsCard" tabindex="0">
        <h3>⏰ Upcoming Deadlines</h3>
        <ul>
          <li>Assignments due Sept 15</li>
          <li>Midterm exams start Oct 1</li>
          <li>Orientation materials due Sept 7</li>
        </ul>
      </article>
    </div>
  </section>

  <!-- ASSIGNMENTS -->
  <section id="assignments" class="portal-section" tabindex="0" aria-live="polite">
    <h2>Submit Assignments</h2>
    <div class="card">
      <form id="assignmentForm" aria-label="Assignment submission form">
        <label for="assignmentSubject">Select Subject:</label>
        <select id="assignmentSubject" name="assignmentSubject" required>
          <option value="">-- Choose Subject --</option>
          <!-- Year I -->
          <option>Logic</option>
          <option>Rhetoric</option>
          <option>Systems Analysis</option>
          <option>Tactical Mathematics</option>
          <option>Critical Ethics</option>
          <!-- Year II -->
          <option>Complex Simulations</option>
          <option>Interdisciplinary Strategy</option>
          <option>Code & Cipher</option>
          <option>Advanced Decision Sciences</option>
          <!-- Year III -->
          <option>Strategic Intelligence & Analysis</option>
          <option>Advanced Engineering & Technology</option>
          <option>Leadership Studies & Ethics</option>
          <option>Cyber Operations & Defense</option>
          <option>Communications & Media Strategy</option>
          <!-- Year IV -->
          <option>Thesis Initiative</option>
          <option>Lab Deployments</option>
          <option>Public Defense Panels</option>
          <!-- Orientation -->
          <option>Orientation Materials</option>
        </select>

        <label for="assignmentFile">Upload File:</label>
        <input type="file" id="assignmentFile" name="assignmentFile" accept=".pdf,.doc,.docx,.txt" required />

        <button type="submit">Submit</button>
      </form>

      <div id="submittedAssignments" aria-live="polite" aria-atomic="true" style="margin-top:1rem;">
        <h3>Your Submitted Assignments:</h3>
        <ul id="assignmentsList" aria-label="List of submitted assignments"></ul>
      </div>
    </div>
  </section>

  <!-- EXAMS -->
  <section id="exams" class="portal-section" tabindex="0" aria-live="polite">
    <h2>Exams</h2>

    <label for="examSubject">Select Subject to View or Take Exams:</label>
    <select id="examSubject" aria-describedby="examHelp">
      <option value="">-- Choose Subject --</option>
      <!-- Same subject list -->
      <option>Logic</option>
      <option>Rhetoric</option>
      <option>Systems Analysis</option>
      <option>Tactical Mathematics</option>
      <option>Critical Ethics</option>
      <option>Complex Simulations</option>
      <option>Interdisciplinary Strategy</option>
      <option>Code & Cipher</option>
      <option>Advanced Decision Sciences</option>
      <option>Strategic Intelligence & Analysis</option>
      <option>Advanced Engineering & Technology</option>
      <option>Leadership Studies & Ethics</option>
      <option>Cyber Operations & Defense</option>
      <option>Communications & Media Strategy</option>
      <option>Thesis Initiative</option>
      <option>Lab Deployments</option>
      <option>Public Defense Panels</option>
      <option>Orientation Materials</option>
    </select>

    <button id="loadExamsBtn">Load Exams</button>

    <p id="examHelp" style="font-size: 0.9rem; margin-top: 0.2rem; color: var(--dark-gray);">
      Select a subject to view available exams. If an exam is available, you can take it online. Once graded, your results will appear here.
    </p>

    <table id="examTable" aria-label="Exams table" style="margin-top:1.5rem;">
      <thead>
        <tr>
          <th>Course</th>
          <th>Credits</th>
          <th>Teacher</th>
          <th>Grade</th>
          <th>Details</th>
        </tr>
      </thead>
      <tbody id="examTableBody">
        <!-- Dynamically generated exam rows -->
      </tbody>
    </table>

    <div id="examDetails" aria-live="polite" aria-atomic="true" style="display:none;">
      <!-- Detailed breakdown of selected exam -->
    </div>

  </section>

  <!-- INBOX -->
  <section id="inbox" class="portal-section" tabindex="0" aria-live="polite">
    <div id="chatSidebar" aria-label="Department chat list">
      <h2>Departments</h2>
      <ul id="chatList" role="listbox" tabindex="0" aria-label="Select a department to chat">
        <li role="option" tabindex="0" data-dept="IT">Information Technology</li>
        <li role="option" tabindex="0" data-dept="Admissions">Dean of Admissions</li>
        <li role="option" tabindex="0" data-dept="President">President of the Collegiate</li>
        <li role="option" tabindex="0" data-dept="Faculty">Faculty Affairs</li>
        <li role="option" tabindex="0" data-dept="Registrar">Registrar's Office</li>
        <li role="option" tabindex="0" data-dept="Library">Library Services</li>
      </ul>
    </div>
    <div id="chatWindow" aria-label="Chat window with selected department">
      <div id="chatHeader">Select a Department to Begin</div>
      <div id="messageThread" aria-live="polite"></div>

      <form id="messageForm" aria-label="Send message form">
        <select id="messageRecipient" name="messageRecipient" aria-label="Select department recipient" required>
          <option value="">Select Department</option>
          <option value="IT">Information Technology</option>
          <option value="Admissions">Dean of Admissions</option>
          <option value="President">President of the Collegiate</option>
          <option value="Faculty">Faculty Affairs</option>
          <option value="Registrar">Registrar's Office</option>
          <option value="Library">Library Services</option>
        </select>

        <input type="text" id="messageSubject" name="messageSubject" placeholder="Subject" aria-label="Message subject" required />

        <textarea id="messageBody" name="messageBody" placeholder="Type your message..." aria-label="Message body" required></textarea>

        <button type="submit">Send</button>
      </form>
    </div>
  </section>

  <!-- CALENDAR -->
  <section id="calendar" class="portal-section" tabindex="0" aria-live="polite">
    <div id="calendarHeader" role="region" aria-label="Calendar navigation">
      <button id="prevMonthBtn" aria-label="Previous month">&lt;</button>
      <div id="monthYearLabel" aria-live="polite" aria-atomic="true" style="font-weight:700; font-family: var(--font-display); font-size:1.4rem;"></div>
      <button id="nextMonthBtn" aria-label="Next month">&gt;</button>
    </div>

    <table id="calendarTable" role="grid" aria-label="Calendar days">
      <thead>
        <tr>
          <th scope="col">Sun</th>
          <th scope="col">Mon</th>
          <th scope="col">Tue</th>
          <th scope="col">Wed</th>
          <th scope="col">Thu</th>
          <th scope="col">Fri</th>
          <th scope="col">Sat</th>
        </tr>
      </thead>
      <tbody id="calendarBody"></tbody>
    </table>

    <button id="addEventBtn" aria-label="Add new calendar event" style="margin-top:1rem;">Add Event</button>

    <!-- Modal for adding events -->
    <div id="eventModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div id="eventModalContent">
        <h3 id="modalTitle">Add New Event</h3>
        <form id="eventForm">
          <label for="eventDate">Date:</label>
          <input type="date" id="eventDate" required />

          <label for="eventTitle">Event Title:</label>
          <input type="text" id="eventTitle" required />

          <label for="eventDescription">Description:</label>
          <textarea id="eventDescription" rows="3"></textarea>

          <label for="eventType">Type:</label>
          <select id="eventType" required>
            <option value="General">General</option>
            <option value="Exam">Exam</option>
            <option value="Deadline">Deadline</option>
            <option value="Meeting">Meeting</option>
          </select>

          <button type="submit">Save Event</button>
          <button type="button" id="cancelEventBtn" style="margin-left:10px;">Cancel</button>
        </form>
      </div>
    </div>
  </section>

  <!-- SETTINGS -->
  <section id="settings" class="portal-section" tabindex="0" aria-live="polite">
    <div class="card">
      <h2>Profile Settings</h2>

      <form id="settingsForm" aria-label="Profile settings form">
        <label for="profilePic">Profile Picture:</label>
        <input type="file" id="profilePic" accept="image/*" />

        <label for="recoveryEmail">Recovery Email:</label>
        <input type="email" id="recoveryEmail" placeholder="you@example.com" />

        <label for="recoveryPhone">Recovery Phone Number:</label>
        <input type="tel" id="recoveryPhone" placeholder="+1 555 555 5555" />

        <label for="securityQuestion">Security Question:</label>
        <select id="securityQuestion">
          <option value="">Select a question...</option>
          <option>What was the name of your first pet?</option>
          <option>What is your mother's maiden name?</option>
          <option>What was the name of your elementary school?</option>
          <option>What city were you born in?</option>
        </select>

        <label for="securityAnswer">Answer:</label>
        <input type="text" id="securityAnswer" />

        <label for="currentPassword">Current Password:</label>
        <input type="password" id="currentPassword" placeholder="Enter current password" />

        <label for="newPassword">New Password:</label>
        <input type="password" id="newPassword" placeholder="Enter new password" />

        <label for="confirmPassword">Confirm New Password:</label>
        <input type="password" id="confirmPassword" placeholder="Confirm new password" />

        <button type="submit">Save Settings</button>
      </form>
    </div>
  </section>

</main>

<script>
  // Navigation and section switching
  const navButtons = document.querySelectorAll('nav button:not(.logout)');
  const sections = document.querySelectorAll('section.portal-section');

  navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      navButtons.forEach(b => {
        b.classList.remove('active');
        b.setAttribute('aria-selected', 'false');
      });
      btn.classList.add('active');
      btn.setAttribute('aria-selected', 'true');

      sections.forEach(sec => {
        sec.classList.remove('active');
      });
      const targetId = btn.getAttribute('aria-controls');
      document.getElementById(targetId).classList.add('active');
      document.getElementById(targetId).focus();
    });
  });

  // Logout button redirects to login.html
  document.getElementById('logoutBtn').addEventListener('click', () => {
    alert("You have been logged out.");
    window.location.href = 'login.html';
  });

  // Home page slideshow logic
  const slideshowImgs = document.querySelectorAll('#home .slideshow img');
  let slideIndex = 0;
  function showSlide() {
    slideshowImgs.forEach((img, idx) => {
      img.classList.toggle('active', idx === slideIndex);
    });
    slideIndex = (slideIndex + 1) % slideshowImgs.length;
  }
  setInterval(showSlide, 5000);

  // Quotes array - Bible, Motivational, Scientific
  const quotes = [
    "“I can do all things through Christ who strengthens me.” – Philippians 4:13",
    "“The best way to predict the future is to create it.” – Peter Drucker",
    "“Education is the most powerful weapon which you can use to change the world.” – Nelson Mandela",
    "“Science is organized knowledge.” – Herbert Spencer",
    "“Do not be conformed to this world, but be transformed by the renewing of your mind.” – Romans 12:2",
    "“Success is not final, failure is not fatal: it is the courage to continue that counts.” – Winston Churchill",
    "“Somewhere, something incredible is waiting to be known.” – Carl Sagan",
    "“Trust in the Lord with all your heart and lean not on your own understanding.” – Proverbs 3:5",
    "“The only limit to our realization of tomorrow will be our doubts of today.” – Franklin D. Roosevelt",
    "“Research is creating new knowledge.” – Neil Armstrong"
  ];
  const quoteBox = document.getElementById('quoteBox');
  let quoteIndex = 0;
  function updateQuote() {
    quoteBox.textContent = quotes[quoteIndex];
    quoteIndex = (quoteIndex + 1) % quotes.length;
  }
  updateQuote();
  setInterval(updateQuote, 8000);

  // Assignments Form
  const assignmentForm = document.getElementById('assignmentForm');
  const assignmentsList = document.getElementById('assignmentsList');
  let submittedAssignments = [];

  assignmentForm.addEventListener('submit', e => {
    e.preventDefault();
    const subject = assignmentForm.assignmentSubject.value;
    const fileInput = assignmentForm.assignmentFile;
    if (!subject || fileInput.files.length === 0) {
      alert('Please select a subject and upload a file.');
      return;
    }
    const fileName = fileInput.files[0].name;
    submittedAssignments.push({subject, fileName, date: new Date().toLocaleString()});
    renderAssignments();
    assignmentForm.reset();
  });

  function renderAssignments() {
    assignmentsList.innerHTML = '';
    submittedAssignments.forEach((a, i) => {
      const li = document.createElement('li');
      li.textContent = `${a.subject} — ${a.fileName} (submitted on ${a.date})`;
      assignmentsList.appendChild(li);
    });
  }

  // Exams Section - simulate exams uploaded by staff, allow taking and grading
  const examSubjectSelect = document.getElementById('examSubject');
  const loadExamsBtn = document.getElementById('loadExamsBtn');
  const examTableBody = document.getElementById('examTableBody');
  const examDetails = document.getElementById('examDetails');

  // Sample exams database (in-memory)
  const examsDB = {
    'Logic': [
      {course: 'Logic', credits: 3, teacher: 'Prof. Smith', grade: null, examContent: 'Q1: Define logic.\nQ2: Explain syllogism.', answers: null},
    ],
    'Orientation Materials': [
      {course: 'Orientation Materials', credits: 1, teacher: 'Dean Lee', grade: 92, examContent: 'Q1: What is the campus motto?', answers: 'A1: Truth and Honor.'},
    ]
    // ... add more exams per subject as needed
  };

  // When user clicks "Load Exams"
  loadExamsBtn.addEventListener('click', () => {
    const subject = examSubjectSelect.value;
    if (!subject) {
      alert('Please select a subject to load exams.');
      return;
    }
    loadExams(subject);
  });

  function loadExams(subject) {
    examTableBody.innerHTML = '';
    examDetails.style.display = 'none';
    if (!examsDB[subject] || examsDB[subject].length === 0) {
      examTableBody.innerHTML = `<tr><td colspan="5" style="text-align:center; font-style: italic;">No exams available for ${subject}.</td></tr>`;
      return;
    }
    examsDB[subject].forEach((exam, idx) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${exam.course}</td>
        <td>${exam.credits}</td>
        <td>${exam.teacher}</td>
        <td>${exam.grade === null ? 'Not graded' : exam.grade + '%'}</td>
        <td><button aria-label="View or take exam for ${exam.course}" data-exam-index="${idx}">Open</button></td>
      `;
      examTableBody.appendChild(tr);
    });

    // Add event listeners to buttons
    examTableBody.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', () => {
        const idx = +btn.getAttribute('data-exam-index');
        openExam(subject, idx);
      });
    });
  }

  function openExam(subject, examIndex) {
    const exam = examsDB[subject][examIndex];
    examDetails.style.display = 'block';
    examDetails.innerHTML = '';

    if (exam.grade === null) {
      // Student can take exam
      const examForm = document.createElement('form');
      examForm.innerHTML = `
        <h3>Taking Exam: ${exam.course}</h3>
        <pre style="white-space: pre-wrap; background:#f9f9f9; padding:1rem; border-radius:10px; border: 1px solid var(--oxblood);">${exam.examContent}</pre>
        <label for="examAnswers">Your Answers:</label>
        <textarea id="examAnswers" required rows="6" style="width:100%; font-family: monospace; font-size:1rem;"></textarea>
        <button type="submit" style="margin-top:1rem; background: var(--oxblood); color: var(--gold); border:none; padding:0.5rem 1rem; border-radius:10px; font-weight:bold; cursor:pointer;">Submit Exam</button>
      `;

      examForm.addEventListener('submit', e => {
        e.preventDefault();
        const answers = examForm.querySelector('#examAnswers').value.trim();
        if (!answers) {
          alert('Please enter your answers.');
          return;
        }
        exam.answers = answers;
        exam.grade = "Pending grading";
        alert('Your exam has been submitted for grading.');
        renderExamsAgain(subject);
        examDetails.style.display = 'none';
      });

      examDetails.appendChild(examForm);
    } else if (exam.grade === "Pending grading") {
      examDetails.innerHTML = `<p>Your exam for <strong>${exam.course}</strong> is pending grading. Please check back later.</p>`;
    } else {
      // Show graded exam
      examDetails.innerHTML = `
        <h3>Graded Exam: ${exam.course}</h3>
        <p><strong>Teacher:</strong> ${exam.teacher}</p>
        <p><strong>Grade:</strong> ${exam.grade}%</p>
        <h4>Your Answers:</h4>
        <pre style="white-space: pre-wrap; background:#f9f9f9; padding:1rem; border-radius:10px; border: 1px solid var(--oxblood);">${exam.answers}</pre>
      `;
    }
  }

  function renderExamsAgain(subject) {
    loadExams(subject);
  }

  // Inbox - chat simulation
  const chatList = document.getElementById('chatList');
  const chatHeader = document.getElementById('chatHeader');
  const messageThread = document.getElementById('messageThread');
  const messageForm = document.getElementById('messageForm');
  const messageRecipient = document.getElementById('messageRecipient');

  // Simulated message storage per department
  const messages = {
    IT: [],
    Admissions: [],
    President: [],
    Faculty: [],
    Registrar: [],
    Library: []
  };
  let activeDept = null;

  function loadMessages(dept) {
    chatHeader.textContent = deptNames[dept];
    messageRecipient.value = dept;
    messageThread.innerHTML = '';
    activeDept = dept;

    messages[dept].forEach(msg => {
      appendMessage(msg.text, msg.sent);
    });
  }

  function appendMessage(text, sent = true) {
    const msgDiv = document.createElement('div');
    msgDiv.classList.add('message', sent ? 'sent' : 'received');
    msgDiv.textContent = text;
    messageThread.appendChild(msgDiv);
    messageThread.scrollTop = messageThread.scrollHeight;
  }

  const deptNames = {
    IT: "Information Technology",
    Admissions: "Dean of Admissions",
    President: "President of the Collegiate",
    Faculty: "Faculty Affairs",
    Registrar: "Registrar's Office",
    Library: "Library Services"
  };

  chatList.querySelectorAll('li').forEach(li => {
    li.addEventListener('click', () => {
      chatList.querySelectorAll('li').forEach(el => el.classList.remove('active'));
      li.classList.add('active');
      loadMessages(li.getAttribute('data-dept'));
    });
  });

  // Send message form
  messageForm.addEventListener('submit', e => {
    e.preventDefault();
    if (!activeDept) {
      alert('Please select a department first.');
      return;
    }
    const recipient = messageRecipient.value;
    const subject = messageForm.messageSubject.value.trim();
    const body = messageForm.messageBody.value.trim();
    if (!recipient || !subject || !body) {
      alert('Please complete all fields.');
      return;
    }

    const fullMessage = `Subject: ${subject}\n${body}`;
    messages[recipient].push({text: fullMessage, sent: true});

    appendMessage(fullMessage, true);

    messageForm.reset();

    // Simulate department reply after delay
    setTimeout(() => {
      const reply = `Auto-reply from ${deptNames[recipient]}: We received your message on "${subject}". We will respond shortly.`;
      messages[recipient].push({text: reply, sent: false});
      if (activeDept === recipient) {
        appendMessage(reply, false);
      }
    }, 1500);
  });

  // Load first dept by default
  chatList.querySelector('li').click();

  // Calendar Section
  const monthYearLabel = document.getElementById('monthYearLabel');
  const calendarBody = document.getElementById('calendarBody');
  const prevMonthBtn = document.getElementById('prevMonthBtn');
  const nextMonthBtn = document.getElementById('nextMonthBtn');
  const addEventBtn = document.getElementById('addEventBtn');
  const eventModal = document.getElementById('eventModal');
  const cancelEventBtn = document.getElementById('cancelEventBtn');
  const eventForm = document.getElementById('eventForm');

  let calendarDate = new Date();
  calendarDate.setDate(1);

  // Events stored in memory
  let calendarEvents = [
    {date: formatDateISO(new Date()), title: 'Welcome Orientation', description: 'Meet your advisors and peers.', type: 'Meeting'}
  ];

  function renderCalendar() {
    calendarBody.innerHTML = '';

    const year = calendarDate.getFullYear();
    const month = calendarDate.getMonth();

    monthYearLabel.textContent = calendarDate.toLocaleString('default', {month: 'long', year: 'numeric'});

    const firstDayIndex = new Date(year, month, 1).getDay();
    const lastDay = new Date(year, month + 1, 0).getDate();

    let date = 1;
    // 6 rows (weeks) * 7 days = 42 cells max
    for (let i = 0; i < 6; i++) {
      const tr = document.createElement('tr');

      for (let d = 0; d < 7; d++) {
        const td = document.createElement('td');
        if (i === 0 && d < firstDayIndex) {
          td.textContent = '';
        } else if (date > lastDay) {
          td.textContent = '';
        } else {
          td.textContent = date;

          // Add events for this day
          const thisDateISO = formatDateISO(new Date(year, month, date));
          const eventsToday = calendarEvents.filter(e => e.date === thisDateISO);
          eventsToday.forEach(ev => {
            const evSpan = document.createElement('span');
            evSpan.className = 'event';
            evSpan.textContent = ev.title;
            td.appendChild(evSpan);
          });

          // Click to open event modal with prefilled date
          td.addEventListener('click', () => {
            openEventModal(thisDateISO);
          });

          date++;
        }
        tr.appendChild(td);
      }
      calendarBody.appendChild(tr);
    }
  }

  function formatDateISO(dateObj) {
    return dateObj.toISOString().split('T')[0];
  }

  prevMonthBtn.addEventListener('click', () => {
    calendarDate.setMonth(calendarDate.getMonth() - 1);
    renderCalendar();
  });

  nextMonthBtn.addEventListener('click', () => {
    calendarDate.setMonth(calendarDate.getMonth() + 1);
    renderCalendar();
  });

  addEventBtn.addEventListener('click', () => {
    openEventModal();
  });

  cancelEventBtn.addEventListener('click', () => {
    eventModal.classList.remove('active');
    eventForm.reset();
  });

  eventForm.addEventListener('submit', e => {
    e.preventDefault();
    const date = eventForm.eventDate.value;
    const title = eventForm.eventTitle.value.trim();
    const description = eventForm.eventDescription.value.trim();
    const type = eventForm.eventType.value;

    if (!date || !title) {
      alert('Date and Title are required.');
      return;
    }

    calendarEvents.push({date, title, description, type});
    renderCalendar();
    eventModal.classList.remove('active');
    eventForm.reset();
  });

  function openEventModal(date = '') {
    eventModal.classList.add('active');
    eventForm.eventDate.value = date || formatDateISO(new Date());
    eventForm.eventTitle.focus();
  }

  renderCalendar();

  // Settings Form logic (simulate saving, validate password reset)
  const settingsForm = document.getElementById('settingsForm');
  settingsForm.addEventListener('submit', e => {
    e.preventDefault();

    const currentPwd = settingsForm.currentPassword.value.trim();
    const newPwd = settingsForm.newPassword.value.trim();
    const confirmPwd = settingsForm.confirmPassword.value.trim();

    if ((newPwd || confirmPwd) && newPwd !== confirmPwd) {
      alert('New password and confirmation do not match.');
      return;
    }

    // Simulate save profile
    alert('Settings saved successfully!');

    settingsForm.reset();
  });
</script>

</body>
</html>
